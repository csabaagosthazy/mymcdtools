<!DOCTYPE html>
<html lang="en"
	  xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://thymeleaf.org"
	  xmlns:sec="http://thymeleaf.org/thymeleaf-extras-springsecurity5">
	<head>
		 <title>Registration</title>
		 <object th:replace="layout/head :: head">...</object>
	</head>
    <body>
		<div class="container">
		  <h2><br><br></h2>
		  <div class="panel panel-default">
		    <div class="panel-heading">Login</div>
		    <div th:replace="layout/nav :: navigation">...</div>
		    <div class="panel-body">		
				 <div class="col-md-4 col-md-offset-4">
				 	<div th:if="${param.regsuccess}" class="alert alert-info">
						<h3>The registration was successful!</h3><br>
						The activation email sent to your email address.<br>
						Please activate your account with the activation link.<br>
						Until then your account is inactive.
					</div>
					<div th:if="${param.regsuccess_emailerr}" class="alert alert-warning">
						<h3>There was some problem during activation!</h3><br>
						Activation email cannot be sent,<br>
						Please contact the administrator!
					</div>
					<div th:if="${param.regerror}" class="alert alert-warning">
						<h3>There was something problem during the registration</h3><br>
						Please try again later or contact the administrator!
					</div>
					
					
            <h1>Registration</h1>
            <form th:action="@{/reg}" th:object="${user}" method="post">

                <p class="error-message"
                   th:if="${#fields.hasGlobalErrors()}"
                   th:each="error : ${#fields.errors('global')}"
                   th:text="${error}">Validation error</p>

                <div class="form-group"
                     th:classappend="${#fields.hasErrors('username')}? 'has-error':''">
                    <label for="username" class="control-label">Username</label>
                    <input id="username"
                           class="form-control"
                           th:field="*{username}"/>
                    <p class="error-message"
                       th:each="error : ${#fields.errors('username')}"
                       th:text="${error}">Validation error</p>
                </div>
                <div class="form-group"
                     th:classappend="${#fields.hasErrors('email')}? 'has-error':''">
                    <label for="email" class="control-label">E-mail</label>
                    <input id="email"
                           class="form-control"
                           th:field="*{email}"/>
                    <p class="error-message"
                       th:each="error : ${#fields.errors('email')}"
                       th:text="${error}">Validation error</p>
                </div>
                <div class="form-group"
                     th:classappend="${#fields.hasErrors('confirmEmail')}? 'has-error':''">
                    <label for="confirmEmail" class="control-label">Confirm e-mail</label>
                    <input id="confirmEmail"
                           class="form-control"
                           th:field="*{confirmEmail}"/>
                    <p class="error-message"
                       th:each="error : ${#fields.errors('confirmEmail')}"
                       th:text="${error}">Validation error</p>
                </div>
                <div class="form-group"
                     th:classappend="${#fields.hasErrors('password')}? 'has-error':''">
                    <label for="password" class="control-label">Password</label>
                    <input id="password"
                           class="form-control"
                           type="password"
                           th:field="*{password}"/>
                    <p class="error-message"
                       th:each="error : ${#fields.errors('password')}"
                       th:text="${error}">Validation error</p>
                </div>
                <div class="form-group"
                     th:classappend="${#fields.hasErrors('confirmPassword')}? 'has-error':''">
                    <label for="confirmPassword" class="control-label">Confirm password</label>
                    <input id="confirmPassword"
                           class="form-control"
                           type="password"
                           th:field="*{confirmPassword}"/>
                    <p class="error-message"
                       th:each="error : ${#fields.errors('confirmPassword')}"
                       th:text="${error}">Validation error</p>
                </div>
                <div class="form-group"
                     th:classappend="${#fields.hasErrors('terms')}? 'has-error':''">
                    <input id="terms"
                           type="checkbox"
                           th:field="*{terms}"/>  
                    <label class="control-label" for="terms">
                        I agree with the <a href="#">terms and conditions</a> for Registration.
                    </label>
                    <p class="error-message"
                       th:each="error : ${#fields.errors('terms')}"
                       th:text="${error}">Validation error</p>
                </div>
                <button type="submit" class="btn btn-success">Register</button>

            </form>
				  <h3>Have an account already?</h3>
			      <a href="/login">Login</a>
			      <br><br>
				</div></div>
		    <div th:replace="layout/footer :: footer" class="panel-footer">Panel Footer</div>
		  </div>
		</div>	
    </body>
    
</html>
